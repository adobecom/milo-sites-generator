{"version":3,"file":"content-container.js","sources":["../../src/blocks/content-container/content-container.js"],"sourcesContent":["import 'nsw-design-system/src/components/content-block/_content-block.scss';\nimport './content-container.scss';\nimport { div as divElem } from '../../scripts/dom-helpers.js';\nimport { moveInstrumentation } from '../../scripts/scripts.js';\nimport { createOptimizedPicture } from '../../scripts/aem.js';\n\nfunction decorateImageColumn(imageColumn) {\n  // Make the first column the image container if there is an image\n  if (imageColumn.querySelector('picture')) {\n    imageColumn.className = 'nsw-content-block__image';\n  }\n}\n\nfunction decorateTextColumn(textColumn) {\n  textColumn.classList.add('nsw-content-block__content');\n  [...textColumn.children].forEach((child) => {\n    if (/^H[1-6]$/.test(child.tagName)) {\n      child.classList.add('nsw-content-block__title');\n    } else if (child.tagName === 'P') {\n      const hasAnchorTag = child.querySelector('a') !== null;\n      if (hasAnchorTag) {\n        child.classList.add('nsw-content-block__link');\n      } else {\n        child.classList.add('nsw-content-block__copy');\n      }\n    }\n  });\n}\n\nexport default function decorate(block) {\n  const grid = divElem({ class: 'nsw-grid' });\n  [...block.children].forEach((contentBlock) => {\n    contentBlock.classList.add('nsw-col', 'nsw-col-md-6', 'nsw-col-lg-4');\n    const [imageColumn, textColumn] = contentBlock.children;\n    decorateImageColumn(imageColumn);\n    decorateTextColumn(textColumn);\n    grid.append(contentBlock);\n  });\n  grid.querySelectorAll('picture > img').forEach((img) => {\n    const optimizedPic = createOptimizedPicture(img.src, img.alt, false, [\n      { width: '750' },\n    ]);\n    moveInstrumentation(img, optimizedPic.querySelector('img'));\n    img.closest('picture').replaceWith(optimizedPic);\n  });\n\n  block.textContent = '';\n  block.append(grid);\n}\n"],"names":["decorateImageColumn","imageColumn","decorateTextColumn","textColumn","child","decorate","block","grid","divElem","contentBlock","img","optimizedPic","createOptimizedPicture","moveInstrumentation"],"mappings":"mJAMA,SAASA,EAAoBC,EAAa,CAEpCA,EAAY,cAAc,SAAS,IACrCA,EAAY,UAAY,2BAE5B,CAEA,SAASC,EAAmBC,EAAY,CACtCA,EAAW,UAAU,IAAI,4BAA4B,EACrD,CAAC,GAAGA,EAAW,QAAQ,EAAE,QAASC,GAAU,CACtC,WAAW,KAAKA,EAAM,OAAO,EAC/BA,EAAM,UAAU,IAAI,0BAA0B,EACrCA,EAAM,UAAY,MACNA,EAAM,cAAc,GAAG,IAAM,KAEhDA,EAAM,UAAU,IAAI,yBAAyB,EAE7CA,EAAM,UAAU,IAAI,yBAAyB,EAGrD,CAAG,CACH,CAEe,SAASC,EAASC,EAAO,CACtC,MAAMC,EAAOC,EAAQ,CAAE,MAAO,UAAU,CAAE,EAC1C,CAAC,GAAGF,EAAM,QAAQ,EAAE,QAASG,GAAiB,CAC5CA,EAAa,UAAU,IAAI,UAAW,eAAgB,cAAc,EACpE,KAAM,CAACR,EAAaE,CAAU,EAAIM,EAAa,SAC/CT,EAAoBC,CAAW,EAC/BC,EAAmBC,CAAU,EAC7BI,EAAK,OAAOE,CAAY,CAC5B,CAAG,EACDF,EAAK,iBAAiB,eAAe,EAAE,QAASG,GAAQ,CACtD,MAAMC,EAAeC,EAAuBF,EAAI,IAAKA,EAAI,IAAK,GAAO,CACnE,CAAE,MAAO,KAAO,CACtB,CAAK,EACDG,EAAoBH,EAAKC,EAAa,cAAc,KAAK,CAAC,EAC1DD,EAAI,QAAQ,SAAS,EAAE,YAAYC,CAAY,CACnD,CAAG,EAEDL,EAAM,YAAc,GACpBA,EAAM,OAAOC,CAAI,CACnB"}