import{f as P,I as A}from"../chunks/main-BAccA7R5.js";import{g as w}from"../chunks/aem-DzghdSH4.js";let b=!1,u=window.location.pathname;function v(a){return a.title||a.navTitle}function E(a,n){const s=window.location.pathname,e=n.split("/").filter(Boolean),m=s.split("/").filter(Boolean),f=m.length===e.length,p=m.length>e.length;let t={};if(f){const c=a.filter(({path:i})=>i.split("/").filter(Boolean).length===1),l=a.find(({path:i})=>i===n),o=a.filter(({path:i})=>i.split("/").filter(Boolean).length===e.length+1&&i.startsWith(n)&&i!==n);c.forEach(i=>{const{path:h}=i,r=v(i);t[r]={path:h,title:r,children:{},isActive:s.startsWith(h)}}),l&&o.forEach(i=>{const{path:h}=i,r=v(i);t[v(l)].children[r]={path:h,title:r,children:{},isActive:s.startsWith(h)}})}else p&&(t={},a.filter(({path:l})=>l.startsWith(n)&&l!==n).forEach(l=>{const{path:o}=l,i=v(l),h=o.replace(n,"").split("/").filter(Boolean);let r=t;h.forEach(d=>{r[d]||(r[d]={path:o,title:i||d,children:{},isActive:s.startsWith(o)}),r=r[d].children})}));return t}function B(a,n){return Object.values(a).some(s=>{const e=s.path.split("/");let m=s.path;return e.length>2&&(m=e.slice(1,3).join("/")),n.includes(m)})}function C(a,n){const s=document.createElement("ul");Object.values(a).forEach(({path:e,title:m,children:f})=>{const p=f&&Object.keys(f).length,t=document.createElement("li"),c=Object.assign(document.createElement("a"),{href:e,textContent:m});u===e&&c.classList.add("current"),p&&u.startsWith(e)&&t.classList.add("active"),t.appendChild(c),p&&(!b||B(f,u))&&C(f,t),s.appendChild(t)}),n.appendChild(s)}async function S(a){var p;const n=await P();if(A){const t=await w(),c=t==null?void 0:t.basesiteurl;c?u=(p=u.split(c))==null?void 0:p[1]:u=(o=>{const i=n.map(d=>d.path).filter(d=>d.split("/").length===2),h=o.replace(/\.html$/,""),r=h.split("/");for(let d=1;d<r.length;d+=1){const g=`/${r[d]}`;if(i.includes(g))return h.substring(h.indexOf(g))}return""})(u)}const s=`/${u.split("/").filter(Boolean)[0]||""}`,e=document.createElement("nav");e.className="nsw-side-nav",e.setAttribute("aria-labelledby","dynamic-nav");const m=u===s;if(!m){const t=document.createElement("div");t.className="nsw-side-nav__header",t.id="dynamic-nav";const c=n.find(({path:l})=>l===s);if(c){const l=Object.assign(document.createElement("a"),{href:c.path,textContent:v(c)}),o=document.createElement("span");o.className="material-icons nsw-material-icons",o.setAttribute("focusable","false"),o.setAttribute("aria-hidden","true"),o.textContent="west",l.prepend(o),t.appendChild(l)}e.appendChild(t)}let f;m?(f=E(n,s),n.find(({path:c})=>c==="/")&&C({Home:{path:"/",title:"Home",children:{}}},e),C(f,e)):(b=!0,f=E(n,s),C(f,e)),a.textContent="",a.appendChild(e)}export{S as default};
//# sourceMappingURL=sidebar.js.map
